---
title: 数据库系统概述(水文勿看)
date: 2020-12-17 00:29:57
tags: [数据库]
---
# 1.1数据库系统概述

### 1.1.1 数据库的四个基本概念

* 1、数据（data）

  * 定义：描述事物的符号记录称为数据。
  * 含义：数据的含义称为数据的语义。数据与其语义是不可分的。
  * 数据是数据库中存储的基本对象
  * 数据的种类
    * 文本、图形、图像、音频、视频、学生的档案记录、货物的运输情况等
  * 数据的特点
    * 数据与其语义是不可分的


* 2、数据库（DataBase，DB）

  * 数据库的定义
     * 数据库(Database,简称DB)是长期储存在计算机内、有组织的、可共享的大量数据的集合。
  * 数据库的基本特征
     * 数据按一定的数据模型组织、描述和储存
     * 可为各种用户共享
     * 冗余度（redundancy）较小
     * 数据独立性（data independency）较高
     * 易扩展（scalability）

* 3、数据库管理系统（DataBase Management System，DBMS）

  * DBMS的定义
    * 位于用户与操作系统之间的一层数据管理软件。
    * 计算机系统的基础软件，是一个大型复杂的软件系统
  * DBMS的用途
    * 科学地组织和存储数据、高效地获取和维护数据
  * 数据库管理系统是计算机的基础软件
  
  * 数据库在计算机系统中的位置
  
    ![](数据库在计算机系统中的位置.png)
  
  * 主要功能：
  
    * 1>数据定义功能——数据定义语言（Data Definition Language，DDL）
    
    * 2>数据组织、存储和管理——如何实现数据之间的连系    （如：索引查找、hash查找、顺序查找等。 ）

    * 3>数据操纵功能——数据操纵语言（Data Manipulation Language，DML） 如：查询、插入、删除、修改等
    
    * 4>数据库事务管理和运行管理
    
    * 5>数据库的建立和维护功能
    
    * 6>其他功能（数据库管理系统与网络中其他软件系统的通信功能、一个数据库管理系统与另一个数据库管理系统或文件系统的数据转换功能、异构数据库之间的互访和互操作功能等）
    
* 4、数据库系统（DataBase System，DBS）

  * 数据库系统是由数据库、数据库管理系统（及其应用开发工具）、应用程序和数据库管理员（DataBase Administrator，DBA）组成的存储、管理、处理和维护数据的系统。
  
    * 数据库：提供数据的存储功能；
    
    * 数据库管理系统：提供数据的组织、存取、管理和维护等基础功能；
    
    * 数据库应用系统：根据应用需求使用数据库；
    
    * 数据库管理员：负责全面管理数据库系统。
    
    ![](1.1.1.png)
  
### 1.1.2 数据管理技术的产生和发展

* 什么是数据管理
    * 对数据进行分类、组织、编码、存储、检索和维护
    * 数据处理的中心问题
* 数据管理技术的发展过程
    * 人工管理阶段(20世纪40年代中--50年代中)
    * 文件系统阶段(20世纪50年代末--60年代中)
    * 数据库系统阶段(20世纪60年代末--现在)

-----------

* 1、人工管理阶段

  * <1>时期
    * 20世纪40年代中--50年代中
  * <2>产生的背景
    * 应用需求：科学计算	
    * 硬件水平：无直接存取存储设备
    * 软件水平：没有操作系统
    * 处理方式：批处理
  * <3>特点
  
    * 1>数据不保存
    
    * 2> 应用程序管理数据
    
    * 3>数据不共享
    
    * 4>数据不具有独立性

  * <4>应用程序与数据之间的 一 一 对应关系
  
    ![](人工管理阶段应用程序与数据之间的一一对应关系.png)

* 2、文件系统阶段

  * <1>时期
    * 20世纪50年代末--60年代中
  * <2>产生的背景
    * 应用需求：科学计算、管理	
    * 硬件水平：磁盘、磁鼓
    * 软件水平：有文件系统
    * 处理方式：联机实时处理、批处理

  * <3>优点：
  
    * 1>数据可以长期保存
    
    * 2>由文件系统管理数据
    
  * <4>缺点：
  
    * 1>数据共享性差，冗余度大
    
    * 2>数据独立性差
    

  * <5>文件系统阶段应用程序与数据之间的对应关关系：
  
      ![](文件系统阶段应用程序与数据之间的对应关关系.png)

* 3、数据库系统阶段（20世纪60年代后期）

  * <1>时期
    * 20世纪60年代末以来
  * <2>产生的背景
    * 应用背景：大规模管理
    * 硬件背景：大容量磁盘、磁盘阵列	
    * 软件背景：有数据库管理系统	
    * 处理方式：联机实时处理,分布处理,批处理

  * <3>从文件系统到数据库系统标志着数据管理技术的飞跃。



![](数据库系统阶段应用程序与数据之间的对应关关系.png)

* 4、数据库管理三个阶段的比较

![](数据库管理三个阶段的比较.png)


### 1.1.3 数据库系统的特点

* 1、数据结构化

  * 1>数据库系统实现整体数据的结构化，这是数据库的主要特征之一，也是数据库系统与文件系统的本质区别。
  
  * 2>所谓“整体”结构化是指数据库中的数据不再仅仅针对某一个应用，而是面向整个组织或企业；不仅数据内部是结构化的，而且整体是结构化的，数据之间是具有连系的。
  

![](学生数据.png)

* 2、数据的共享性搞、冗余度低且易扩充

  * 1>数据共享可以大大减小数据冗余，节约存储空间。数据共享还能避免数据之间的不相容性与不一致性。
  
  * 2>数据库系统弹性大，易于扩充。
  
* 3、数据独立性高

  * 1>物理独立性：是指用户的应用程序与数据库中数据的物理存储是相互独立的。
  
  * 2>逻辑独立性：是指用户的应用程序与数据库中数据的逻辑结构是相互独立的。

* 4、数据库由数据库管理系统统一管理和控制

  * 1>数据的安全性（security）保护：指保护数据以防止不合法使用造成的数据泄密和破坏。
  
  * 2>数据的完整性（integrity）检查：指数据的正确性、有效性和相容性。
  
  * 3>并发（concurrency）控制
  
  * 4>数据库恢复（recovery）
  
    * 数据库管理系统必须具有将数据库从错误状态恢复到某一已知的正确状态（亦称为完整状态或一致状态）的功能，这就是数据库的恢复功能。
    
      
      ![](数据库系统阶段应用程序与数据之间的对应关系.png)
    
  * 数据库是长期存储在计算机内有组织、大量、共享的数据集合。它可以供各种用户共享，具有最小冗余度和较高的数据独立性。数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据库的完整性和安全性，并在多用户同时使用数据库时进行并发控制，在发生故障后对数据库进行恢复。
  
  * 数据库系统的出现使信息系统从以加工数据的程序为中心转向围绕共享的数据库为中心的新阶段。

### 1.1.4 数据管理技术的产生和发展

* 数据管理技术的发展动力
  * 应用需求的推动
  * 计算机硬件的发展
  * 计算机软件的发展

# 1.2数据模型

* 数据模型（data model）：也是一种模型，是对现实世界数据特征的抽象。
* 数据模型是数据库的核心和基础。
* 定义
    * 数据模型是对现实世界的模拟，在数据库中用于抽象、表示和处理现实世界中的数据和信息的工具。
* 要求
    * 能比较真实地模拟现实世界
    * 容易为人所理解
    * 便于在计算机上实现



### 1.2.1 两类数据模型

* 1、概念模型
     * 按用户的观点来对数据和信息建模，用于数据库设计，也称作信息模型。  
* 2、逻辑模型和物理模型
     * 逻辑模型是指按计算机系统的观点对数据建模，用于DBMS实现。
     * 物理模型是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法，在磁盘或磁带上的存储方式和存取方法。


* 首先将现实世界抽象为信息世界，然后将信息世界转换为机器世界。

   ![](现实世界中客观对象的抽象过程.png)

### 1.2.2 概念模型

* 1、信息世界中的基本概念：

  * 1>实体（entity）：客观存在并可相互区别的事物称为实体。
  * 2>属性（attribute）：实体所具有的某一特性称为属性。
  * 3>码（key）：唯一标识实体的属性集称为码。
  * 4>实体型（entity type）：用实体名及其属性名集合来抽象和刻画同类实体，称为实体型。
  * 5>实体集（entity set）：同一类型实体的集合称为实体集。
  * 6>联系（relationship）：现实世界中事物内部以及事物之间的联系在信息世界中反映为实体内部的联系和实体之间的联系。
      * 实体内部的联系通常是指组成实体的各属性之间的联系
      * 实体之间的联系通常是指不同实体集之间的联系
  * 7>域（Domain）：属性的取值范围。


* 2、概念模型的一种表达方式：实体——联系方法

  * 实体——联系方法（Entity——Relationship approach）
      * 用E—R图（E—R diagram）来描述现实世界的概念模型
      * E—R方法也称为E-R模型。

   ![](ER.png)

* 3、用途
   * 概念模型用于信息世界的建模，是现实世界到机器世界的一个中间层次，数据库设计人员和用户之间进行交流的语言。
* 4、要求
   * 较强的语义表达能力
   * 简单、清晰、易于用户理解

### 1.2.3 数据模型的组成要素（数据模型通常由数据结构、数据操作和数据的完整性约束条件三部分组成）

* 1、数据结构：数据结构描述数据库的组成对象以及对象之间的联系。
   
   * 定义
      * 描述数据库的组成对象，以及对象之间的联系
   * 描述的内容
      * 与数据类型、内容、性质有关的对象
      * 与数据之间联系有关的对象
   * 数据结构是对系统静态特性的描述

* 2、数据操作：数据操作是指对数据库中各种对象（型）的实例（值）允许执行的操作的集合，包括操作及有关的操作规则。

   * 数据操作
      * 对数据库中各种对象(型)的实例(值)允许执行的
      * 操作及有关的操作规则
   * 数据操作的类型和定义
      * 查询、更新(包括插入、删除、修改)
      * 操作的确切含义、操作符号、操作规则（如优先级）、实现操作的语言
   * 数据操作是对系统动态特性的描述


* 3、数据的完整性约束条件：数据的完整性约束条件是一组完整性规则。

   * 数据的完整性约束条件
      * 一组完整性规则的集合。
      * 完整性规则：给定的数据模型中数据及其联系所具有的制约和储存规则
      * 目的：用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效、相容。

   * 数据模型对完整性约束条件的定义
      * 反映和规定本数据模型必须遵守的基本的通用的完整性约束条件。例如在关系模型中，任何关系必须满足实体完整性和参照完整性两个条件。
      * 提供定义完整性约束条件的机制，以反映具体应用所涉及的数据必须遵守的特定的语义约束条件。

### 1.2.4 常用的数据模型

* 数据库领域中主要的逻辑数据模型：

    * 层次模型（hierarchical model）
    * 网状模型（network model）
    * 关系模型（relational model）
    * 面向对象数据模型（object origined data model）
    * 对象关系数据模型（object relational data model）
    * 半结构化数据模型（semistructure data model）

* 基本层次联系：是指两个记录以及它们之间的一对多（包括一对一）的联系，如下图所示：

    ![](基本层次联系.png)

### 1.2.5 层次模型（层次模型用树形结构来表示各类实体以及实体间的联系）

* 1、层次模型的数据结构：

    * 在数据库中定义满足下面两个条件的基本层次联系的集合为层次模型：
    
        * 1>有且只有一个节点没有双亲节点，这个节点称为根节点；
        * 2>根以外的其他节点有且只有一个双亲节点。
    
    * 在层次模型中，每个节点表示一个记录类型，记录类型之间的联系用节点之间的连线（有向边）表示，这种联系是父子之间的一对多的联系。
    
      ![](一个层次模型的示例.png)
    
        * 层次模型像一棵倒立的树，节点的双亲是唯一的。
* 2、层次模型的特点：
   * 结点的双亲是唯一的
   * 只能直接处理一对多的实体联系
   * 每个记录类型可以定义一个排序字段，也称为码字段
   * 任何记录值只有按其路径查看时，才能显出它的全部意义
   * 没有一个子女记录值能够脱离双亲记录值而独立存在
* 3、层次模型的优点
   * 层次模型的数据结构比较简单清晰 
   * 查询效率高，性能优于关系模型，不低于网状模型
   * 层次数据模型提供了良好的完整性支持
* 4、层次模型的缺点
   * 多对多联系表示不自然
   * 对插入和删除操作的限制多，应用程序的编写比较复杂 
   * 查询子女结点必须通过双亲结点
   * 由于结构严密，层次命令趋于程序化 


### 1.2.6 网状模型（典型代表是DBTG系统，亦称CODASYL系统）

* 1、网状模型的数据结构：

    * 在数据库中定义满足下面两个条件的基本层次联系的集合为网状模型：
    
        * 1>允许一个以上的节点无双亲；
        * 2>一个节点可以有多余一个的双亲。

      ![](网状模型的例子.png)

* 2、网状模型的优点
   * 能够更为直接地描述现实世界，如一个结点可以有多个双亲
   * 具有良好的性能，存取效率较高
* 3、网状模型的缺点
   * 结构比较复杂，而且随着应用环境的扩大，数据库的结构就变得越来越复杂，不利于最终用户掌握
   * DDL、DML语言复杂，用户不容易使用
   * 记录之间联系是通过存取路径实现的，用户必须了解系统结构的细节

### 1.2.7 关系模型

* 1、在用户观点下，关系模型中数据的逻辑结构是一张二维表，它由行和列组成。
* 2、关系模型的数据结构
   * 关系（Relation）
      * 一个关系对应通常说的一张表
   * 元组（Tuple）
      * 表中的一行即为一个元组
   * 属性（Attribute）
      * 表中的一列即为一个属性，给每一个属性起一个名称即属性名
   * 主码（Key）
      * 表中的某个属性组，它可以唯一确定一个元组。
   * 域（Domain）
      * 属性的取值范围。
   * 分量
      * 元组中的一个属性值。
   * 关系模式
      * 对关系的描述

* 3、最基本的规范条件：关系的每一个分量必须是一个不可分的数据项
* 4、关系数据模型的操纵与完整性约束
   * 数据操作是集合操作，操作对象和操作结果都是关系
   * 存取路径对用户隐蔽，用户只要指出“干什么”，不必详细说明“怎么干”
   * 关系的完整性约束条件 
      * 实体完整性
      * 参照完整性
      * 用户定义的完整性
* 5、关系模型的优缺点
   * 优点
      * 建立在严格的数学概念的基础上
      * 概念单一
      * 关系模型的存取路径对用户透明
   * 缺点
      * 存取路径对用户透明导致查询效率不如非关系数据模型
      * 为提高性能，必须对用户的查询请求进行优化，增加了开发DBMS的难度


# 1.3 数据库系统的结构

* 数据库系统外部的体系结构
    * 单用户结构
    * 主从式结构
    * 分布式结构
    * 客户／服务器
    * 浏览器／应用服务器／数据库服务器多层结构等
* 数据库系统内部的系统结构
    * 模式（Schema） 
    * 外模式（External Schema）
    * 内模式（Internal Schema）


### 1.3.1 数据库系统模式的概念

* 在数据模型中有“型”（type）和值（value）的概念。
    * 型(Type)：对某一类数据的结构和属性的说明
    * 值(Value)：是型的一个具体赋值
* 模式是相对稳定的，而实例是相对变动的。
    * 模式（Schema）
        * 数据库逻辑结构和特征的描述
        * 是型的描述
        * 反映的是数据的结构及其联系
        * 模式是相对稳定的
    * 实例（Instance）
        * 模式的一个具体值
        * 反映数据库某一时刻的状态
        * 同一个模式可以有很多实例
        * 实例随数据库中的数据的更新而变动

* 数据库管理系统通常都具有相同的特征，即采用三级模式结构，并提供两级映像功能。

### 1.3.2 数据库系统的三级模式结构

![](数据库系统的三级模式结构.png)

* 1、模式（schema）：模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。
    * 模式（逻辑模式）
        * 数据库中全体数据的逻辑结构和特征的描述
        * 综合所有用户的需求
        * 一个数据库只有一个模式
    * 模式的内容
        * 数据的逻辑结构（数据项的名字、类型、取值范围等）
        * 数据之间的联系
        * 数据有关的安全性、完整性要求
    * 模式的地位：是数据库系统模式结构的中间层
        * 与数据的物理存储细节和硬件环境无关
        * 与具体的应用程序、开发工具及高级程序设计语言无关
* 2、外模式（external schema）：外模式也称子模式（subschema）或用户模式，它是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述,是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。
    * 外模式（子模式、用户模式）
        * 数据库用户（应用程序员、最终用户）使用的局部数据的逻辑结构和特征的描述
    * 外模式的地位：介于模式与应用之间
    * 模式与外模式的关系：一对多
        * 外模式是模式的子集
        * 对模式中同一数据，在外模式中的结构、类型、权限等都可以不同
    * 外模式的用途 
        * 逻辑的简化或扩展
        * 数据库安全性措施

* 3、内模式（Internal schema）：内模式也称存储模式（storage schema），一个数据库只有一个内模式。它是数据库物理结构和存储方式的描述，是数据在数据库内部的组织方式。
    * 内模式（也称存储模式）
        * 数据在数据库内部的组织方式，包括物理结构和存储方式的描述：
        * 数据存储记录结构的规定
        * 记录的存储方式：顺序存储，堆存储、聚簇存储等
        * 索引的组织方式
        * 压缩与否及类型
        * 加密与否及类型
    * 一个数据库只有一个内模式


* 目标
    * 程序和数据的分离
    * 数据和存储的分离

### 1.3.3 数据库的二级映像功能与数据独立

!()[数据库的二级映像.png]

* 1、外模式/模式映像

    当模式改变时（例如增加新的关系、新的属性、改变属性的数据类型等），由数据库管理员对各个外模式/模式的映像作相应改变，可以使外模式保持不变。应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。

    * 外模式/模式映象：外模式与模式之间的对应关系
    * 映象定义通常包含在各自外模式的描述中
    * 目的：保证数据的逻辑独立性

* 2、模式/内模式映像

    当数据的存储结构改变时（例如选用了另一种存储结构），由数据库管理员对模式/内模式映像作相应改变，可以使模式保持不变，从而应用程序也不必改变。保证了数据与程序的物理独立性，简称数据的物理独立性。
    
    数据与程序之间的独立性使得数据的定义和描述可以从应用程序中分离出去。另外，由于数据的存取由数据库管理系统管理，从而简化了应用程序的编制，大大减少了应用程序的维护和修改。

    * 模式/内模式映象：模式与内模式之间的对应关系
    * 该映象定义通常包含在模式描述中
    * 目的：保证数据的物理独立性

# 1.4数据库系统的组成

### 一、硬件
* 数据库系统对硬件资源的要求
   * 内存
      * 操作系统、DBMS核心模块、数据缓冲区、应用程序
   * 外存
      * 磁盘或磁盘阵列、 光盘、磁带
   * 通道能力

### 二、软件

* DBMS
* 支持DBMS运行的操作系统
* 与数据库接口的高级语言及其编译系统
* 以DBMS为核心的应用开发工具
* 为特定应用环境开发的数据库应用系统

### 三、人员


   ![](各种人的数据视图.png)

* 数据库管理员（DataBase Administrator，DBA）

   * 职责：
      * 决定数据库中的信息内容和结构
      * 决定数据库的存储结构和存取策略
      * 定义数据的安全性要求和完整性约束条件
      * 监控数据库的使用和运行
      * 数据库的改进和重组

* 系统分析员和数据库设计人员

   * 系统分析员职责：
      * 负责应用系统的需求分析和规范说明
      * 与用户及DBA协商，确定系统的硬软件配置
      * 参与数据库系统的概要设计
   * 数据库设计人员职责：
      * 参加用户需求调查和系统分析
      * 确定数据库中的数据
      * 设计数据库各级模式

* 应用程序员

   * 设计和编写应用系统的程序模块
   * 进行调试和安装

* 用户

   * 偶然用户
      * 不经常访问数据库，但每次访问数据库时往往需要不同的数据库信息
      * 企业或组织机构的高中级管理人员
   * 简单用户
      * 主要工作是查询和更新数据库 
      * 银行的职员、机票预定人员、旅馆总台服务员
   * 复杂用户
      * 直接使用数据库语言访问数据库，甚至能够基于数据库管理系统的API编制自己的应用程序
      * 工程师、科学家、经济学家、科技工作者等











